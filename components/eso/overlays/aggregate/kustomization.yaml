kind: Kustomization
apiVersion: kustomize.config.k8s.io/v1beta1

commonAnnotations:
  argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true

resources:
- github.com/redhat-cop/gitops-catalog/external-secrets-operator/operator/overlays/stable
- github.com/redhat-cop/gitops-catalog/external-secrets-operator/instance/overlays/default
- podmonitor.yaml
- prometheus-rule.yaml

patches:
  - patch: |
      - op: add
        path: /spec/startingCSV
        value: external-secrets-operator.v0.9.17
      - op: replace
        path: /spec/installPlanApproval
        value: Manual
    target:
      kind: Subscription
      name: external-secrets-operator
